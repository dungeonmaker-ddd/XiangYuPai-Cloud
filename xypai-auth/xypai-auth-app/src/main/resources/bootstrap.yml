# Tomcat
server:
  port: 8102

# Spring
spring:
  application:
    # 应用名称 - APP业务服务独立命名
    name: xypai-auth-app
  profiles:
    # 环境配置
    active: dev
  main:
    # 允许Bean定义覆盖（解决Feign客户端冲突）
    allow-bean-definition-overriding: true
  cloud:
    nacos:
      discovery:
        # 服务注册地址 - 外部化配置
        server-addr: ${NACOS_ADDR:127.0.0.1:8848}
        # 用户名 - 外部化配置
        username: ${NACOS_USERNAME:nacos}
        # 密码 - 外部化配置
        password: ${NACOS_PASSWORD:nacos}
        # 服务实例元数据
        metadata:
          version: 4.0.0
          service-type: business
          client-support: app
      config:
        # 配置中心地址 - 外部化配置
        server-addr: ${NACOS_ADDR:127.0.0.1:8848}
        # 配置文件格式
        file-extension: yml
        # 用户名 - 外部化配置
        username: ${NACOS_USERNAME:nacos}
        # 密码 - 外部化配置
        password: ${NACOS_PASSWORD:nacos}
        # 共享配置
        shared-configs:
          - application-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}

# APP业务配置
app:
  business:
    # 功能开关
    features:
      profile-management: true
      device-binding: true
      push-notification: true
      social-login: false
    # 文件上传配置
    upload:
      max-file-size: 10MB
      allowed-types: jpg,jpeg,png,gif
      avatar-path: /uploads/avatars/

# 认证服务配置
auth:
  service:
    # 认证服务URL - 外部化配置
    url: ${AUTH_SERVICE_URL:http://xypai-auth-app-auth:8101}
    # 请求超时配置
    timeout:
      connect: 3000
      read: 10000

# 监控配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
  health:
    livenessstate:
      enabled: true
    readinessstate:
      enabled: true

# Knife4j配置
knife4j:
  enable: true
  setting:
    language: zh_CN
    enable-version: true
    enable-host-text: APP业务服务
  production: false
  basic:
    enable: false

# SpringDoc配置
springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true

# 网关配置
gateway:
  host: localhost:8080